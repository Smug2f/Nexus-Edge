package com.gamesense.client.module.modules.exploits;

import com.gamesense.api.setting.values.IntegerSetting;
import com.gamesense.client.module.Category;
import com.gamesense.client.module.Module;
import net.minecraft.item.ItemFood;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.BlockPos;

@Module.Declaration(name = "SpeedNom",category = Category.Exploits)
public class SpeedNom extends Module {

    IntegerSetting nomSpeed = registerInteger("Nom Delay",16,1,20);
    IntegerSetting spoofs = registerInteger("Nom Speed",30,1,100);

    int ticks;

    @Override
    public void onUpdate() {
        if (mc.player.isHandActive() && mc.player.inventory.getCurrentItem().item instanceof ItemFood && ticks > nomSpeed.getValue()) {

            for (int i = 0; i < spoofs.getValue(); i++) {
                mc.player.connection.sendPacket(new CPacketPlayer(true));
            }

            mc.player.connection.sendPacket(new CPacketPlayerDigging(CPacketPlayerDigging.Action.RELEASE_USE_ITEM, BlockPos.ORIGIN, EnumFacing.DOWN));
            mc.player.stopActiveHand();

            ticks = 0;

            return;

        }
        ticks++;
    }
}
